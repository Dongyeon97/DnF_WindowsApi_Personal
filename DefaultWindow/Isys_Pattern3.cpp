#include "stdafx.h"
#include "Isys_Pattern3.h"

#include "ObjMgr.h"

#include "Player.h"
#include "AI.h"
#include "Monster.h"
#include "MonsterAttack.h"
#include "MonsterAttack2.h"
#include "Effect.h"
#include "SoundMgr.h"
#include "NonAlpha.h"
#include "RuneStone.h"
#include "ScrollMgr.h"
#include "BmpMgr.h"
#include "UI_Alpha.h"
#include "TownCutsin.h"

CIsys_Pattern3::CIsys_Pattern3()
	: CState(BOSS_PATTERN3)
	, m_iSuccessCount(0)
	, m_IsSuccess(false)
{

}

CIsys_Pattern3::~CIsys_Pattern3()
{
}

void CIsys_Pattern3::Update()
{
	// PlayerÀÇ À§Ä¡ Ã¼Å©
	CObj* pPlayer = CObjMgr::Get_Instance()->GetObjList(OBJ_PLAYER).front();
	float fPlayerX = pPlayer->Get_Info().fX;
	float fPlayerY = pPlayer->Get_Info().fY;

	// ¸ó½ºÅÍ ÀÚ½ÅÀÇ À§Ä¡ Ã¼Å©
	CMonster* pMonster = GetMonster();
	float fMonsterX = pMonster->Get_Info().fX;
	float fMonsterY = pMonster->Get_Info().fY;

	if (pPlayer)
	{
		// 2Â÷ ±¤ÆøÈ­ ÆÐÅÏ ÁøÀÔ¸ð¼Ç - Ã³À½ ÁøÀÔÇÒ¶§¸¸ ¹ßµ¿
		if (0 < pMonster->Get_dwTime() && 0 == m_iAttackCount && 0 == m_iPatternCount)
		{
			++m_iAttackCount;
			// ÀÌ½Ã½º°¡ ¹«Àû»óÅÂ°¡ µÊ
			pMonster->Set_IsImmune(true);

			pMonster->Set_ScaleX(160.f);
			pMonster->Set_ScaleY(304.f);
			pMonster->Set_FrameKey(L"Isys_FlyingReady");
			pMonster->Set_State(BOSS_FLYINGREADY);
			CSoundMgr::Get_Instance()->PlaySoundW(L"isys_skill_04.ogg", SOUND_EFFECT3, g_fVolume + 0.2f);
		}
		else if (1.2 < pMonster->Get_dwTime() && 1 == m_iAttackCount && 0 == m_iPatternCount)
		{
			++m_iAttackCount;

			// ³¯°³ »ý¼º
			CObjMgr::Get_Instance()->Add_Object(OBJ_EFFECT, CAbstractFactory<CMonsterAttack>::
				Create_Obj(ATT_JUSTEFFECT, true, fMonsterX - 45.f, fMonsterY - 115.f, 702.f, 524.f, 0.f, 180.f, 0.f, 0.f, 0.9f, 700, 350.f, pMonster->Get_Rect().bottom,
					pMonster->Get_Info().fAtk, 10.f, 5.f, 1.f, 3.5f, 90.f, 180.f, 1.f, L"Isys_JumpWing", { 255, 0, 255 }));
			CObjMgr::Get_Instance()->GetObjList(OBJ_EFFECT).back()->Set_Frame(tagFrame{ 0, 6, 0, 0.125, 0. });
			CObjMgr::Get_Instance()->GetObjList(OBJ_EFFECT).back()->Set_RenderID(BACKGROUNDEFFECT);

			// È¸¿À¸® ¹ß»ý
			CObjMgr::Get_Instance()->Add_Object(OBJ_EFFECT, CAbstractFactory<CTownCutsin>::
				Create_Obj(ATT_JUSTEFFECT, false, 400.f, 300.f, 800.f, 600.f, 0.f, 0.f, 0.f, 0.f, 1.5f, 800.f, 600.f, pMonster->Get_Rect().bottom,
					pMonster->Get_Info().fAtk, 10.f, 5.f, 1.f, 3.5f, 90.f, 180.f, 1.f, L"Isys_Wind", { 0, 0, 0 }));
			CObjMgr::Get_Instance()->GetObjList(OBJ_EFFECT).back()->Set_Frame(tagFrame{ 0, 18, 0, 0.08, 0. });
			CObjMgr::Get_Instance()->GetObjList(OBJ_EFFECT).back()->Set_AlphaValue(200);

			pMonster->Set_ScaleX(371.f);
			pMonster->Set_ScaleY(373.f);
			pMonster->Set_FrameKey(L"Isys_FlyingReady2");
			pMonster->Set_State(BOSS_APPEAR);
		}
		else if (2.1 < pMonster->Get_dwTime() && 2 == m_iAttackCount && 0 == m_iPatternCount)
		{
			++m_iAttackCount;
			// Á¡ÇÁ ¸ð¼Ç
			CObjMgr::Get_Instance()->Add_Object(OBJ_EFFECT, CAbstractFactory<CMonsterAttack>::
				Create_Obj(ATT_JUSTEFFECT, true, fMonsterX - 80.f, fMonsterY - 200.f, 415.f, 636.f, 0.f, 180.f, 0.f, 0.f, 0.6f, 700, 350.f, pMonster->Get_Rect().bottom,
					pMonster->Get_Info().fAtk, 10.f, 5.f, 1.f, 3.5f, 90.f, 180.f, 1.f, L"Isys_JumpBeam", { 255, 255, 255 }));
			CObjMgr::Get_Instance()->GetObjList(OBJ_EFFECT).back()->Set_Frame(tagFrame{ 0, 5, 0, 0.1, 0. });

			// ¾È°³
			CObjMgr::Get_Instance()->Add_Object(OBJ_EFFECT, CAbstractFactory<CMonsterAttack>::
				Create_Obj(ATT_JUSTEFFECT, true, fMonsterX + 50.f, fMonsterY + 50.f, 871.f, 419.f, 0.f, 180.f, 0.f, 0.f, 1.0f, 700, 350.f, pMonster->Get_Rect().bottom,
					pMonster->Get_Info().fAtk, 10.f, 5.f, 1.f, 3.5f, 90.f, 180.f, 1.f, L"Smoke_Jump_FloorTest", { 0, 0, 0 }));
			CObjMgr::Get_Instance()->GetObjList(OBJ_EFFECT).back()->Set_Frame(tagFrame{ 0, 9, 0, 0.1, 0. });
			CSoundMgr::Get_Instance()->PlaySoundW(L"isys_wing_01.ogg", SOUND_EFFECT, g_fVolume + 0.2f);
			CSoundMgr::Get_Instance()->PlaySoundW(L"isys_meet_wing_disappear.ogg", SOUND_EFFECT2, g_fVolume + 0.2f);
			CSoundMgr::Get_Instance()->PlaySoundW(L"isys_meet_whirlwind.ogg", SOUND_EFFECT3, g_fVolume + 0.2f);

			// °¡¿îµ¥·Î ÀÌµ¿ÈÄ ÆÐÅÏ½ÃÀü
			pMonster->Set_Pos(NEST_SIZEX * 0.5f, 300.f);

			pMonster->Set_ScaleX(500.f);
			pMonster->Set_ScaleY(500.f);
			pMonster->Set_FrameKey(L"Isys_Flying");
			pMonster->Set_State(BOSS_FLYING);
		}

		// 1Â÷ ³·/¹ã ·é½ºÅæ »ý¼º
		if (3 < pMonster->Get_dwTime() && 3 == m_iAttackCount && 0 == m_iPatternCount)
		{
			++m_iAttackCount;
			// ºÎ¼Å¾ß ÇÒ ½ºÅæ ¸ð¾ç - ÀÎµ¦½º 1¹ø
			CObjMgr::Get_Instance()->Add_Object(OBJ_DECORATION, CAbstractFactory<CRuneStone>::
				Create_Obj(NEST_SIZEX * 0.5f + 200.f, 300.f, L"BlueRune"));
			CObjMgr::Get_Instance()->GetObjList(OBJ_DECORATION).back()->Set_SpriteIndex(1);
			CObjMgr::Get_Instance()->GetObjList(OBJ_DECORATION).back()->Set_DrawOption(1);

			// ³· ·é½ºÅæ - 1
			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
							 1, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
							 2, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
							 3, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
							 4, 1, OBJ_RUNESTONE1, L"BlueRune");

			// ¹ã ·é½ºÅæ - 2
			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
							 1, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
							 2, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
							 3, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
							 float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
							 4, 1, OBJ_RUNESTONE2, L"RedRune");
		}

		// 2Â÷ ³·/¹ã ·é½ºÅæ »ý¼º
		else if (3 < pMonster->Get_dwTime() && 0 == m_iAttackCount && 1 == m_iPatternCount)
		{
			++m_iAttackCount;
			// ºÎ¼Å¾ß ÇÒ ½ºÅæ ¸ð¾ç - ÀÎµ¦½º 2¹ø
			CObjMgr::Get_Instance()->Add_Object(OBJ_DECORATION, CAbstractFactory<CRuneStone>::
				Create_Obj(NEST_SIZEX * 0.5f + 200.f, 300.f, L"RedRune"));
			CObjMgr::Get_Instance()->GetObjList(OBJ_DECORATION).back()->Set_SpriteIndex(2);
			CObjMgr::Get_Instance()->GetObjList(OBJ_DECORATION).back()->Set_DrawOption(1);

			// ³· ·é½ºÅæ - 1
			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				1, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				2, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				3, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				4, 1, OBJ_RUNESTONE1, L"BlueRune");

			// ¹ã ·é½ºÅæ - 2
			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				1, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				2, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				3, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				4, 1, OBJ_RUNESTONE2, L"RedRune");
		}

		// 3Â÷ ³·/¹ã ·é½ºÅæ »ý¼º
		else if (3 < pMonster->Get_dwTime() && 0 == m_iAttackCount && 2 == m_iPatternCount)
		{
			++m_iAttackCount;
			// ºÎ¼Å¾ß ÇÒ ½ºÅæ ¸ð¾ç - ÀÎµ¦½º 3¹ø
			CObjMgr::Get_Instance()->Add_Object(OBJ_DECORATION, CAbstractFactory<CRuneStone>::
				Create_Obj(NEST_SIZEX * 0.5f + 200.f, 300.f, L"RedRune"));
			CObjMgr::Get_Instance()->GetObjList(OBJ_DECORATION).back()->Set_SpriteIndex(3);
			CObjMgr::Get_Instance()->GetObjList(OBJ_DECORATION).back()->Set_DrawOption(1);

			// ³· ·é½ºÅæ - 1
			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				1, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				2, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				3, 1, OBJ_RUNESTONE1, L"BlueRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				4, 1, OBJ_RUNESTONE1, L"BlueRune");

			// ¹ã ·é½ºÅæ - 2
			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				1, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f - rand() % 100),
				2, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f - rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				3, 1, OBJ_RUNESTONE2, L"RedRune");

			Making_RuneStone(float(NEST_SIZEX * 0.5f + rand() % 600),
				float(NEST_SIZEY * 0.5f + 200.f + rand() % 100),
				4, 1, OBJ_RUNESTONE2, L"RedRune");
		}

		list<CObj*> lstLight = CObjMgr::Get_Instance()->GetObjList(OBJ_RUNESTONE1);
		list<CObj*> lstDark = CObjMgr::Get_Instance()->GetObjList(OBJ_RUNESTONE2);

		list<CObj*>::iterator iterLight = lstLight.begin();
		list<CObj*>::iterator iterDark = lstDark.begin();

		// ½ÇÆÐÆÇÁ¤
		if ((12 < pMonster->Get_dwTime() && 4 == m_iAttackCount && 0 == m_iPatternCount)
			|| (12 < pMonster->Get_dwTime() && 1 == m_iAttackCount && 0 < m_iPatternCount))
		{
			++m_iAttackCount;
			switch (m_iPatternCount)
			{
				// Ã¹¹øÂ° ÆÐÅÏ - 1¹ø ÀÎµ¦½º µ¹ ºÎ¼ö±â
			case 0:
				iterLight = find_if(lstLight.begin(), lstLight.end(), [](auto& iter) {
					if (1 == iter->Get_SpriteIndex())
						return true;
					return false; });
				iterDark = find_if(lstDark.begin(), lstDark.end(), [](auto& iter) {
					if (1 == iter->Get_SpriteIndex())
						return true;
					return false; });

				// ¸¸¾à µÑ´Ù endÀÌÅÍ·¹ÀÌÅÍ¸é ÆÐÅÏ 1È¸ ÆÄÈÑ
				if (iterLight == lstLight.end() && iterDark == lstDark.end() &&
					(3 == lstLight.size() && 3 == lstDark.size()))
					m_IsSuccess = true;
				break;

				// µÎ¹øÂ° ÆÐÅÏ
			case 1:
				iterLight = find_if(lstLight.begin(), lstLight.end(), [](auto& iter) {
					if (2 == iter->Get_SpriteIndex())
						return true;
					return false; });
				iterDark = find_if(lstDark.begin(), lstDark.end(), [](auto& iter) {
					if (2 == iter->Get_SpriteIndex())
						return true;
					return false; });

				// ¸¸¾à µÑ´Ù endÀÌÅÍ·¹ÀÌÅÍ¸é ÆÐÅÏ 1È¸ ÆÄÈÑ
				if (iterLight == lstLight.end() && iterDark == lstDark.end() &&
					(3 == lstLight.size() && 3 == lstDark.size()))
					m_IsSuccess = true;
				break;

				// ¼¼¹øÂ° ÆÐÅÏ
			case 2:
				iterLight = find_if(lstLight.begin(), lstLight.end(), [](auto& iter) {
					if (3 == iter->Get_SpriteIndex())
						return true;
					return false; });
				iterDark = find_if(lstDark.begin(), lstDark.end(), [](auto& iter) {
					if (3 == iter->Get_SpriteIndex())
						return true;
					return false; });

				// ¸¸¾à µÑ´Ù endÀÌÅÍ·¹ÀÌÅÍÀÌ°í, ÇØ´ç ·é½ºÅæ¸¸ ÆÄ±«çÀ¸¸é ÆÐÅÏ 1È¸ ÆÄÈÑ
				if (iterLight == lstLight.end() && iterDark == lstDark.end() &&
					(3 == lstLight.size() && 3 == lstDark.size()))
					m_IsSuccess = true;
				break;
			}

			if (m_IsSuccess)
				++m_iSuccessCount;
		}
		
		// ÆÐÅÏ ½ÎÀÌÅ¬ Á¾·á Á¶°Ç - 15ÃÊÀÌ³»¿¡ °°Àº ¸ð¾çÀÇ ·é½ºÅæÀ» ÆÄ±«ÇÏÁö ¸øÇÒ ½Ã ½ÇÆÐ

		// 1. ÀÌ½Ã½º°¡ ÆÐÅÏ 3È¸¸¦ ¸ðµÎ ¼öÇàÇß°í, ±× Áß 2È¸ ÆÄÈÑ ¼º°øÇßÀ»½Ã º¸½º ±×·Î±â
		if (15 < pMonster->Get_dwTime() && 2 == m_iPatternCount && 2 <= m_iSuccessCount)
		{
			++m_iPatternCount;

			Exit();
			pMonster->Set_ScaleX(371.f);
			pMonster->Set_ScaleY(373.f);
			pMonster->Set_IsImmune(false);
			pMonster->Set_State(MON_STATE::BOSS_GROGY);
			m_pAI->SetCurState(MON_STATE::BOSS_GROGY);
			m_pAI->GetCurState()->Enter();
		}
		// 2. ÀÌ½Ã½º°¡ ÆÐÅÏ 3È¸¸¦ ¸ðµÎ ¼öÇàÇß°í, ±× Áß 2È¸ ÆÄÈÑ ½ÇÆÐÇßÀ»½Ã ¶¥À¸·Î ³»·Á¿À¸é¼­ ¸ÚÀÖ´Â Àü¸ê±â ½ÃÀü(Á¦ÀÛ¿¹Á¤)
		// ÈÄ¿¡ ´Ù½Ã ÆÐÅÏ3 ½ÃÀÛ
		else if (15 < pMonster->Get_dwTime() && 2 == m_iPatternCount && 2 > m_iSuccessCount)
		{
			Exit();
			++m_iPatternCount;
			pMonster->Set_State(MON_STATE::BOSS_PATTERN3_FAIL);
			m_pAI->SetCurState(MON_STATE::BOSS_PATTERN3_FAIL);
			m_pAI->GetCurState()->Enter();
		}
		// 3. ÆÐÅÏ »ç¿ëÈ½¼ö°¡ 3È¸ ¹Ì¸¸ÀÌ°í, ÀÌ¹ø ÆÐÅÏÀ» ÆÄÈÑ ½ÇÆÐÇßÀ»½Ã Àü¹üÀ§ Ãæ°ÝÆÄ ¹ßµ¿ -> ´ÙÀ½ ÆÐÅÏ»çÀÌÅ¬ ÁøÀÔ
		else if (15 < pMonster->Get_dwTime() && 2 > m_iPatternCount && !m_IsSuccess)
		{
			CObjMgr::Get_Instance()->Add_Object(OBJ_MONSTER_ATTACK, CAbstractFactory<CMonsterAttack>::
				Create_Obj(ATT_LEVITATE, true, fPlayerX, pPlayer->Get_TileCollision().bottom - 32, NEST_SIZEX, NEST_SIZEY, 0.f, 0.f, 0.f, 0.f, 1.f, NEST_SIZEX, NEST_SIZEY, pPlayer->Get_TileCollision().bottom - 32,
					pMonster->Get_Info().fAtk, 10000.f, 0.f, 0.f, 10.f, 90.f, 0.f, 0.2f, L"Isys_Awaken", { 0, 0, 0 }));

			for (int i = 0; i < 12; ++i)
			{
				Making_Thunder(float(rand() % NEST_SIZEX), float(200 + rand() % 600), 1.f);
			}

			Exit();
			++m_iPatternCount;
			pMonster->Set_State(MON_STATE::BOSS_PATTERN3);
			m_pAI->SetCurState(MON_STATE::BOSS_PATTERN3);
			m_pAI->GetCurState()->Enter();
		}
		// 4. ÆÐÅÏ »ç¿ëÈ½¼ö°¡ 3È¸ ¹Ì¸¸ÀÌ°í, ÀÌ¹ø ÆÐÅÏÀ» ÆÄÈÑ ¼º°øÇßÀ»½Ã -> ´ÙÀ½ ÆÐÅÏ»çÀÌÅ¬ ÁøÀÔ
		else if (15 < pMonster->Get_dwTime() && 2 > m_iPatternCount && m_IsSuccess)
		{
			Exit();
			++m_iPatternCount;
			pMonster->Set_State(MON_STATE::BOSS_PATTERN3);
			m_pAI->SetCurState(MON_STATE::BOSS_PATTERN3);
			m_pAI->GetCurState()->Enter();
		}
	}
}

void CIsys_Pattern3::LateUpdate()
{
}

void CIsys_Pattern3::Enter()
{
	CMonster* pMonster = GetMonster();
	pMonster->Set_dwTime(0);
	m_iAttackCount = 0;
	m_IsSuccess = false;	// ´ÙÀ½ ÆÐÅÏ »çÀÌÅ¬À» À§ÇØ ¼º°ø¿©ºÎ¸¦ false·Î µ¹·ÁµÒ
}

void CIsys_Pattern3::Exit()
{
	CMonster* pMonster = GetMonster();

	pMonster->Set_dwTime(0);
	m_iAttackCount = 0;		// ´ÙÀ½ ÆÐÅÏ »çÀÌÅ¬À» À§ÇØ °ø°ÝÈ½¼ö ÃÊ±âÈ­
	m_IsSuccess = false;	// ´ÙÀ½ ÆÐÅÏ »çÀÌÅ¬À» À§ÇØ ¼º°ø¿©ºÎ¸¦ false·Î µ¹·ÁµÒ

	// ÇÑ¹ø ÆÐÅÏ »çÀÌÅ¬ µ¹¶§¸¶´Ù ·é½ºÅæ ÀüºÎ ÆÄ±«
	CObjMgr::Get_Instance()->Delete_ID(OBJ_RUNESTONE1);
	CObjMgr::Get_Instance()->Delete_ID(OBJ_RUNESTONE2);
	CObjMgr::Get_Instance()->Delete_ID(OBJ_DECORATION);
}

void CIsys_Pattern3::Making_RuneStone(float _fX, float _fY, int _iSpriteIndex, int _iOption, OBJ_ID _eType, TCHAR* _pKey)
{
	CObjMgr::Get_Instance()->Add_Object(_eType, CAbstractFactory<CRuneStone>::
		Create_Obj(_fX, _fY, _pKey));
	CObjMgr::Get_Instance()->GetObjList(_eType).back()->Set_SpriteIndex(_iSpriteIndex);
	CObjMgr::Get_Instance()->GetObjList(_eType).back()->Set_DrawOption(_iOption);
}

void CIsys_Pattern3::Making_Thunder(float _fX, float _fY, float _fLifeTime)
{
	// ¹ø°³ ÀÌÆåÆ®
	CObjMgr::Get_Instance()->Add_Object(OBJ_MONSTER_WIDEATTACK, CAbstractFactory<CMonsterAttack>::
		Create_Obj(ATT_JUSTEFFECT, false, _fX, _fY, 672.f, 693.f, 0.f, 0.f, 0.f, 0.f, _fLifeTime, 150.f, 300.f, 0.f,
			0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, 0.f, L"Isys_MeetLightning", { 0, 0, 0 }));
	CObjMgr::Get_Instance()->GetObjList(OBJ_MONSTER_WIDEATTACK).back()->Set_Frame(tagFrame{ 0, 11, 0, 0.085, 0. });
	CObjMgr::Get_Instance()->GetObjList(OBJ_MONSTER_WIDEATTACK).back()->Set_RenderID(GAMEOBJECT);
}
